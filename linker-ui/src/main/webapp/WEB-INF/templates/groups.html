<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Linker</title>
    <link rel="stylesheet"
          href="../../resources/static/css/font-awesome.min.css"
          th:href="@{/resources/static/css/font-awesome.min.css}">
    <link rel="stylesheet"
          href="../../resources/static/css/bootstrap.css"
          th:href="@{/resources/static/css/bootstrap.css}">
    <link rel="stylesheet"
          href="../../resources/static/css/style.css"
          th:href="@{/resources/static/css/style.css}">
</head>
<body>


<nav class=" p-0 pl-2 navbar navbar-expand-sm navbar-dark bg-dark text-light">
    <button class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarsNav">
        <span class="navbar-toggler-icon"></span>
    </button>
    <a href="groups.html"
       th:href="@{/calls}"
       class="navbar-brand">
        <img src="../../resources/static/img/asLogoR.svg"
             th:src="@{/resources/static/img/asLogoR.svg}" width="64" height="32"></a>
    <div class="collapse navbar-collapse" id="navbarsNav">
        <!--<div class="navbar-nav">-->
        <!--<a class="nav-item nav-link"-->
        <!--href="crews.html"-->
        <!--th:href="@{/crews}"-->
        <!--&gt;Crews<span class="sr-only">(current)</span></a>-->
        <!--<a class="nav-item nav-link active"-->
        <!--href="groups.html"-->
        <!--th:href="@{/calls}"-->
        <!--&gt;Calls</a>-->
        <!--<a class="nav-item nav-link"-->
        <!--href="cars.html"-->
        <!--th:href="@{/cars}"-->
        <!--&gt;Cars</a>-->
        <!--</div>-->
    </div>
</nav>

<header>
    <nav class=" p-0 pl-2 navbar navbar-expand-sm navbar-light bg-light text-dark">
        <a href="groups.html"
           th:href="@{/groups}" class="navbar-brand text-uppercase mr-auto"
        >Groups</a>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a href="group.html"
                   th:href="@{/group}"
                   class="btn btn-light"
                   data-toggle="tooltip"
                   data-placement="bottom"
                   title="Add group">
                    <i class="fa fa-plus"></i><span class="d-none d-sm-inline">Add Group</span></a>
            </li>
            <li class="nav-item">
                <a href="link.html"
                   th:href="@{/link}"
                   class="btn btn-light"
                   data-toggle="tooltip"
                   data-placement="bottom"
                   title="Add link">
                    <i class="fa fa-plus"></i><span class="d-none d-sm-inline">Add Link</span></a>
            </li>
        </ul>
    </nav>

</header>

<div class="accordion" id="accordionExample">
    <div th:each="group : ${groups}">
        <div class="card">
            <div class="card-header" id="headingOne">
                <h5 class="mb-0">
                    <button class="btn btn-link" type="button" data-toggle="collapse"
                            data-target="#collapseOne" th:data-target="'#' + ${group.id}"
                            aria-expanded="true" aria-controls="collapseOne" th:text="${group.name}">
                        Collapsible Group Item #1
                    </button>
                </h5>
            </div>

            <div id="collapseOne" th:id="${group.id}" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                <div th:each="link : ${group.links}">
                    <div class="card-body" th:text="${link.name}">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid.
                        3
                        wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt
                        laborum
                        eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee
                        nulla
                        assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred
                        nesciunt
                        sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer
                        farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
                        labore sustainable VHS.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<section id="cars">
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <div class="card" th:if="not ${groups.isEmpty()}">
                    <table class="table table-striped">
                        <thead class="thead-inverse">
                        <tr>
                            <th>Groups and Links</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="group : ${groups}">
                            <td th:text="${group.name}">23-03-2018</td>

                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col">

                                        <table class="table table-striped">
                                            <tbody>
                                            <tr th:each="link : ${group.links}">
                                                <td class="text-right">
                                                    <a th:text="${link.name}"
                                                       th:href="${link.url} + ':' + ${link.port}"
                                                       data-toggle="tooltip"
                                                       data-placement="top"
                                                       th:title="${link.description}">Some link</a>
                                                </td>

                                                <td class="text-right">
                                                    <a href="link.html"
                                                       th:href="'/editLink/'+${link.id}"
                                                       class="btn-sm btn-outline-secondary"
                                                       data-toggle="tooltip"
                                                       data-placement="top"
                                                       title="Edit link">
                                                        <i class="fa fa-pencil"></i> <span class="d-none d-md-inline">Edit</span>
                                                    </a>
                                                    <a href="#" class="btn-sm btn-outline-secondary"
                                                       th:href="'/link/'+${link.id}+'/delete'"
                                                       data-toggle="tooltip"
                                                       data-target="confirmDeleteModal"
                                                       data-placement="top"
                                                       title="Delete call">
                                                        <i class="fa fa-remove"></i> <span class="d-none d-md-inline">Delete</span>
                                                    </a>

                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                    </div>
                                </div>
                            </div>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="card alert alert-info" th:if="${groups.isEmpty()}" align="center">
            <h2 th:text="#{call.plAddCall}">Please add groups.</h2>
        </div>
    </div>

</section>

<!-- Modal -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header alert-danger">
                <h5 class="modal-title" id="exampleModalLabel"
                    th:text="#{call.modalTitle}">Delete call</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Please confirm delete
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        th:text="#{general.cancel}">Cancel
                </button>
                <!--<button type="button" class="btn btn-danger" data-dismiss="modal">Delete</button>-->
                <a id="deleteUrl" href="#" class="btn btn-danger"
                   th:text="#{general.delete}">Delete</a>
            </div>
        </div>
    </div>
</div>


<script src="../../resources/static/js/jquery.min.js"
        th:src="@{/resources/static/js/jquery.min.js}"></script>
<script src="../../resources/static/js/popper.min.js"
        th:src="@{/resources/static/js/popper.min.js}"></script>
<script src="../../resources/static/js/bootstrap.min.js"
        th:src="@{/resources/static/js/bootstrap.min.js}"></script>
<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
    $('#confirmDeleteModal').on('show.bs.modal', function (event) {
        var target = $(event.relatedTarget)
        $(this).find('.modal-body').text('Please confirm delete call №: "' + target.data('id') + '"')
        document.getElementById('deleteUrl').href = '/ambulance/call/' + target.data('id') + '/delete';
    })
</script>

</body>
</html>
